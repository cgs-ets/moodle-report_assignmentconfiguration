define(["jquery","core/ajax","core/log","core/templates"],function(e,t,n,s){function o(){var e=this;e.categorySelection=document.getElementById("id_gradecategoriesselect"),e.assessmentSelection=document.getElementById("id_assignselected"),e.categorySelectionJSON=document.getElementById("id_selectedcategoriesJSON").value}return o.prototype.main=function(){this.initEventListeners()},o.prototype.initEventListeners=function(){this.categorySelection.addEventListener("change",this.getAssignmentsForCategory.bind(this))},o.prototype.getAssignmentsForCategory=function(e){for(var t=[],n=0;n<this.categorySelection.options.length;n++)this.categorySelection.options[n].selected&&t.push(this.categorySelection.options[n].value);document.getElementById("id_selectedcategoriesJSON").value=JSON.stringify(t),this.getAssessmentsByCategory()},o.prototype.getAssessmentsByCategory=function(){var n=this;t.call([{methodname:"report_assignmentconfiguration_get_assign_by_category",args:{data:document.getElementById("id_selectedcategoriesJSON").value,course:document.querySelector("#region-main").querySelector("form").querySelector('input[name="id"]').value},done:function(e){e={items:JSON.parse(e.templatecontext).items};s.render("report_assignmentconfiguration/assignments_in_category",e).then(function(e,t){s.replaceNodeContents(".report-assignmentconfiguration-assignments-container",e,t),n.setListenerForActivities()}).catch(function(e){console.error("Error rendering template:",e)})},fail:function(e){console.log(e)}}])},o.prototype.setListenerForActivities=function(){document.getElementById("id_assignselected").addEventListener("change",this.setAssessmentJSON.bind(this))},o.prototype.setAssessmentJSON=function(e){for(var t=[],n=document.getElementById("id_assignselected"),s=0;s<n.options.length;s++)n.options[s].selected&&t.push(n.options[s].value);document.getElementById("id_selectedassessmentsJSON").value=JSON.stringify(t)},{init:function(){(new o).main()}}});